<!DOCTYPE html>
<html>
  <head>
    <title>test cookie</title>
  </head>
  <body>
cookies!
    <script>
function createCookie(name,value,days) {
	if (days) {
		var date = new Date();
		date.setTime(date.getTime()+(days*24*60*60*1000));
		var expires = "; expires="+date.toGMTString();
	}
	else var expires = "";
	document.cookie = name+"="+value+expires+"; path=/";
}

function readCookie(name) {
	var nameEQ = name + "=";
	var ca = document.cookie.split(';');
	for(var i=0;i < ca.length;i++) {
		var c = ca[i];
		while (c.charAt(0)==' ') c = c.substring(1,c.length);
		if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
	}
	return null;
}

  function setcookie(
      name,
      value,
      days = 365,
      path = "/"
    ) {
      let date = new Date();
      date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);
  //    debugger;
  console.log(date)
      const expires = date.toUTCString();
      document.cookie =
        name +
        "=" +
        encodeURIComponent(value) +
        "; expires=" +
        expires +
        "; path=" +
        path;
    };

function uuidv4() {
    if (!!crypto) {
        return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, c =>
            (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)
        );
    } else {
        let d = new Date().getTime(); 
        let d2 = ((typeof performance !== 'undefined') && performance.now && (performance.now() * 1000)) || 0;

        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
            let r = Math.random() * 16;

            if (d > 0) {

                r = (d + r) % 16 | 0;
                d = Math.floor(d / 16);
            } else {
                r = (d2 + r) % 16 | 0;
                d2 = Math.floor(d2 / 16);
            }
            return (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16);
        });
    }
}       
var visitorid=uuidv4();
createCookie('wongwashere',visitorid,3);

window.setTimeout(()=>{
    console.log(visitorid+'   renew exp')
    createCookie('wongwashere',visitorid,200);
console.log(document.cookie)
},10000);
 
console.log(visitorid)
    </script>
  </body>
</html>
